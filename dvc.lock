schema: '2.0'
stages:
  prepare:
    cmd: python src/data_loader.py
    deps:
    - path: data/raw/reviews.csv
      hash: md5
      md5: 7c754345ec12b5965af8a43764c49406
      size: 66187310
    - path: src/data_loader.py
      hash: md5
      md5: 3b3361f81cacb4b9114c4b4044ba5556
      size: 2522
    outs:
    - path: data/processed/test.pkl
      hash: md5
      md5: 913cbc0a6f24de57b71fa2d6489858f3
      size: 325847595
    - path: data/processed/train.pkl
      hash: md5
      md5: 572bc09ca1508accaf36d8f101e89d27
      size: 331745903
  train:
    cmd: python src/model.py
    deps:
    - path: data/processed/test.pkl
      hash: md5
      md5: 913cbc0a6f24de57b71fa2d6489858f3
      size: 325847595
    - path: data/processed/train.pkl
      hash: md5
      md5: 572bc09ca1508accaf36d8f101e89d27
      size: 331745903
    - path: params.yaml
      hash: md5
      md5: ee16172b298551fadf55471a550b704e
      size: 196
    - path: src/model.py
      hash: md5
      md5: 60726caf3bf9d3fa876cf133ede7306b
      size: 3753
    params:
      params.yaml:
        train.batch_size: 8
        train.epochs: 1
        train.eval_subset: 1000
        train.learning_rate: 2e-05
        train.model_name: distilbert-base-uncased
        train.seed: 42
        train.train_subset: 3000
        train.weight_decay: 0.01
    outs:
    - path: metrics.json
      hash: md5
      md5: 659b823d220ccf4e85051d9de0147d8d
      size: 266
    - path: models/trained
      hash: md5
      md5: d32491c2b006e5de7fcc7c0aeb130151.dir
      size: 268544983
      nfiles: 4
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/processed/test.pkl
      hash: md5
      md5: 913cbc0a6f24de57b71fa2d6489858f3
      size: 325847595
    - path: models/trained
      hash: md5
      md5: d32491c2b006e5de7fcc7c0aeb130151.dir
      size: 268544983
      nfiles: 4
    - path: params.yaml
      hash: md5
      md5: ee16172b298551fadf55471a550b704e
      size: 196
    - path: src/evaluate.py
      hash: md5
      md5: bb92d618fcc7c7eeb9d6799f4c1daf12
      size: 2234
    params:
      params.yaml:
        train.eval_subset: 1000
        train.seed: 42
    outs:
    - path: eval_metrics.json
      hash: md5
      md5: 0e1f295d88640d4d3658fd61095d8c75
      size: 179
